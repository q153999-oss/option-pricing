<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Black-Scholes 選擇權評價工具</title>
  <style>
    body { margin:0; font-family:system-ui; background:#0f1115; color:#e5e7eb; }
    header { padding:20px; text-align:center; font-size:24px; font-weight:bold; color:#facc15; }
    .container { max-width:500px; margin:auto; padding:20px; background:#161a22; border-radius:16px; margin-top:30px; }
    label { display:block; margin-top:12px; }
    input { width:100%; padding:8px; margin-top:4px; border-radius:8px; border:none; }
    button { margin-top:16px; width:100%; padding:10px; border-radius:12px; border:none; background:#facc15; color:#0f1115; font-weight:bold; cursor:pointer; }
    .result { margin-top:16px; padding:12px; background:#1f2937; border-radius:12px; font-size:18px; }
  </style>
</head>
<body>
  <header>Black-Scholes 歐式選擇權評價</header>
  <div class="container">
    <label>標的價格 S:</label>
    <input type="number" id="S" value="100" />
    
    <label>履約價格 K:</label>
    <input type="number" id="K" value="100" />
    
    <label>無風險利率 r (年化，%) :</label>
    <input type="number" id="r" value="5" />
    
    <label>波動率 σ (年化，%) :</label>
    <input type="number" id="sigma" value="20" />
    
    <label>到期時間 T (年):</label>
    <input type="number" id="T" value="1" />
    
    <button onclick="calculateOption()">計算選擇權價格</button>
    
    <div class="result" id="result">價格將顯示於此</div>
  </div>

  <script>
    function normCDF(x) {
      // 標準常態累積分布函數 (簡易近似)
      return (1.0 + Math.erf(x / Math.sqrt(2))) / 2.0;
    }

    Math.erf = Math.erf || function(x) {
      // 常態誤差函數近似
      let sign = (x >= 0) ? 1 : -1;
      x = Math.abs(x);
      let t = 1 / (1 + 0.3275911*x);
      let a1=0.254829592, a2=-0.284496736, a3=1.421413741, a4=-1.453152027, a5=1.061405429;
      let y = 1 - (((((a5*t + a4)*t + a3)*t + a2)*t + a1)*t*Math.exp(-x*x));
      return sign*y;
    }

    function calculateOption() {
      const S = parseFloat(document.getElementById('S').value);
      const K = parseFloat(document.getElementById('K').value);
      const r = parseFloat(document.getElementById('r').value)/100;
      const sigma = parseFloat(document.getElementById('sigma').value)/100;
      const T = parseFloat(document.getElementById('T').value);

      const d1 = (Math.log(S/K) + (r + 0.5*sigma*sigma)*T) / (sigma*Math.sqrt(T));
      const d2 = d1 - sigma*Math.sqrt(T);

      const C = S*normCDF(d1) - K*Math.exp(-r*T)*normCDF(d2);
      const P = K*Math.exp(-r*T)*normCDF(-d2) - S*normCDF(-d1);

      document.getElementById('result').innerHTML = `Call 價格: ${C.toFixed(2)} <br> Put 價格: ${P.toFixed(2)}`;
    }
  </script>
</body>
</html>